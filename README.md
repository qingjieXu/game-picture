高清壁纸云图库分为公共图库、私有图库、AI助手三大模块，用户既可在公共图库中进行高清壁纸的分享与检索，也可将珍贵素材存储于私有空间，享受个性化的图片管理、编辑与智能分析服务。AI智能助手为用户提供精准的图片咨询服务与智能推荐，支持多轮对话，RAG知识检索等能力。

核心技术：

权限管理：基于自定义权限校验注解和Spring AOP环绕切面，实现统一的权限校验，区分用户与管理员。

批量导图：利用Jsoup实现Bing网页图片抓取，并通过CompletableFuture实现批量上传和入库，性能提升30%。

空间创建：基于分段锁+TransactionTemplate编程式事务实现空间创建，限制每个用户最多只有一个私有空间。

查询优化：采用Redis+Caffeine构建多级缓存，接口响应耗时降低400%，并通过随机过期时间降低缓存雪崩风险。

Al大模型集成：利用SpringAI框架快速接入通义、Ollama等多种Al大模型，并封装统一的调用接口。

RAG 文档检索：基于 RetrievalAugmentationAdvisor 组合了文档检索器和查询转换器，通过配置相似度阈值和元信息过滤策略，优化了 A 回复的准确性与相关性。

集中式工具注册：基于单例模式实现了集中式工具注册类，统一管理和配置所有可用工具。通过SpringBean注入简化了工具的添加和移除流程，提高了代码的可维护性。

图片搜索：利用Spring AI MCP Server集成Pexels图片API实现了图片搜索MCP服务，让AI能够联网检索图片。

……
